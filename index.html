<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>P5R í† í° ë°•ìŠ¤ ì‹œë®¬ë ˆì´í„°</title>
<style>
    body {
        background-color: #1e1f26;
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 20px;
    }

    h1 { margin-bottom: 30px; }

    .button-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }

    .gacha-btn {
        background: #2c2f3a;
        border-radius: 10px;
        padding: 20px;
        width: 180px;
        cursor: pointer;
        transition: 0.2s;
    }

    .gacha-btn:hover {
        transform: scale(1.05);
        background: #3a3f4d;
    }

    .result-box {
        background: #2c2f3a;
        padding: 20px;
        border-radius: 10px;
        width: 420px;
        margin: 0 auto 20px;
    }

    .log-box {
        background: #111217;
        padding: 15px;
        border-radius: 10px;
        width: 700px;
        margin: 0 auto;
        height: 260px;
        overflow-y: auto;
        text-align: left;
        font-size: 14px;
    }

    button {
        margin-top: 10px;
        padding: 8px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        background: #ff4c4c;
        color: white;
        font-weight: bold;
    }

    button:hover { background: #ff2a2a; }
</style>
</head>
<body>

<h1>ğŸ“¦ P5R ì½œë¼ë³´ í† í° ë°•ìŠ¤ ì‹œë®¬ë ˆì´í„°</h1>

<!-- êµ¬ë§¤ ë²„íŠ¼ -->
<div class="button-container">
    <div class="gacha-btn" onclick="buyBoxes(1)">
        ğŸ“¦ 1ê°œ êµ¬ë§¤<br>(â‚©1,400)
    </div>

    <div class="gacha-btn" onclick="buyBoxes(5)">
        ğŸ“¦ 5ê°œ êµ¬ë§¤<br>(â‚©6,000)
    </div>

    <div class="gacha-btn" onclick="buyBoxes(10)">
        ğŸ“¦ 10ê°œ êµ¬ë§¤<br>(â‚©10,900)
    </div>

    <div class="gacha-btn" onclick="buyBoxes(50)">
        ğŸ“¦ 50ê°œ êµ¬ë§¤<br>(â‚©52,500)
    </div>
</div>

<!-- ê°€ì±  ë²„íŠ¼ -->
<div class="button-container">
    <div class="gacha-btn" onclick="openBox(1)">
        ğŸ¯ 1ì± 
    </div>

    <div class="gacha-btn" onclick="openBox(10)">
        ğŸ”Ÿ 10ì± 
    </div>
</div>

<!-- ìƒíƒœì°½ -->
<div class="result-box">
    <h3>ğŸ“Š í˜„ì¬ ìƒíƒœ</h3>
    <p id="money">ì´ ì‚¬ìš© ê¸ˆì•¡: 0ì›</p>
    <p id="tokens">ì´ íšë“ í† í°: 0 / 1080</p>
    <p id="opened">ì´ ê°œë´‰ ìƒì: 0ê°œ</p>
    <p id="remain">ë‚¨ì€ ìƒì: 0ê°œ</p>
    <button onclick="reset()">ì´ˆê¸°í™”</button>
</div>

<!-- ë¡œê·¸ -->
<div class="log-box" id="log"></div>

<script>
    const rewards = [
        { token: 100, prob: 0.01 },
        { token: 50, prob: 0.03 },
        { token: 30, prob: 0.05 },
        { token: 20, prob: 0.05 },
        { token: 10, prob: 0.10 },
        { token: 5, prob: 0.20 },
        { token: 3, prob: 0.35 },
        { token: 1, prob: 0.21 }
    ];

    let totalMoney = 0;
    let totalTokens = 0;
    let totalOpened = 0;
    let remainingBoxes = 0;

    const priceTable = {
        1: 1400,
        5: 6000,
        10: 10900,
        50: 52500
    };

    function randomReward() {
        let r = Math.random();
        let acc = 0;
        for (let item of rewards) {
            acc += item.prob;
            if (r <= acc) return item.token;
        }
        return 1;
    }

    function buyBoxes(count) {

        totalMoney += priceTable[count];
        remainingBoxes += count;

        document.getElementById("log").innerHTML += 
            `ğŸ’³ ìƒì ${count}ê°œ êµ¬ë§¤ â†’ ${priceTable[count].toLocaleString()}ì›<br>`;

        updateUI();
    }

    function openBox(count) {

        if (remainingBoxes < count) {
            alert("â— ìƒìê°€ ë¶€ì¡±í•´. ë¨¼ì € ìƒìë¥¼ êµ¬ë§¤í•´ì¤˜.");
            return;
        }

        const log = document.getElementById("log");

        for (let i = 0; i < count; i++) {

            totalOpened++;
            remainingBoxes--;

            let reward = randomReward();
            totalTokens += reward;

            log.innerHTML += 
                `ğŸ“¦ ${totalOpened}ë²ˆì§¸ ìƒì â†’ í† í° ${reward}ê°œ<br>`;

            if (totalOpened % 50 === 0) {
                totalTokens += 100;
                log.innerHTML += 
                    `ğŸ‰ ${totalOpened}ë²ˆì§¸ ë³´ë„ˆìŠ¤ â†’ +100 í† í°<br>`;
            }
        }

        updateUI();
        log.scrollTop = log.scrollHeight;
    }

    function updateUI() {
        document.getElementById("money").innerText =
            "ì´ ì‚¬ìš© ê¸ˆì•¡: " + totalMoney.toLocaleString() + "ì›";

        document.getElementById("tokens").innerText =
            "ì´ íšë“ í† í°: " + totalTokens + " / 1080";

        document.getElementById("opened").innerText =
            "ì´ ê°œë´‰ ìƒì: " + totalOpened + "ê°œ";

        document.getElementById("remain").innerText =
            "ë‚¨ì€ ìƒì: " + remainingBoxes + "ê°œ";
    }

    function reset() {
        totalMoney = 0;
        totalTokens = 0;
        totalOpened = 0;
        remainingBoxes = 0;

        document.getElementById("money").innerText = "ì´ ì‚¬ìš© ê¸ˆì•¡: 0ì›";
        document.getElementById("tokens").innerText = "ì´ íšë“ í† í°: 0 / 1080";
        document.getElementById("opened").innerText = "ì´ ê°œë´‰ ìƒì: 0ê°œ";
        document.getElementById("remain").innerText = "ë‚¨ì€ ìƒì: 0ê°œ";
        document.getElementById("log").innerHTML = "";
    }
</script>

</body>
</html>
